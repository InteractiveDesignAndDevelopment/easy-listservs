<!doctype html>
<html>

<head>
  <title>Lookup Listservs</title>
</head>

<body>

  <h1>Lookup Class Listerservs</h1>

  <p>
    <a href="https://it.mercer.edu/faculty/email/email_listservs.htm">Original Page</a>
  </p>

<!-- Start Copying Here =-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=- -->

  <div>

      <div>
        <label for="course">Course ID and Section</label>
      </div>

      <div>
        <input id="course" type="text">
      </div>

      <div>
        e.g. BIO101
      </div>

      <div>
        <a href="mailto:mailserv@mercer.edu" id="create-email">
          Email
        </a>
      </div>

  </div>

  <script>
    /*
     * Email Template From Original Form Handler
     * \\hubbabubba\e$\Inetpub\wwwroot\forms\it-class-listservs-signup.cfm
     * To: `mailserv@mercer.edu`
     * Body: `DIR/LIST <course id>`
     */

    document.addEventListener('DOMContentLoaded', function() {
        // console.log('Ready!');
        var emailButton = document.getElementById('create-email');
        var courseField = document.getElementById('course');
        var originalHref = emailButton.getAttribute('href');
        // Subject prevents no-subject warning in client
        var emailSubject = 'List';
        // console.log(courseField);

        emailButton.addEventListener('click', function() {
          var emailBody = 'DIR/LIST ';
          emailBody += courseField.value;
          // console.log(emailBody);
          var newHref = originalHref;
          newHref += '?subject=' + emailSubject;
          newHref += '&body=' + emailBody;
          emailButton.setAttribute('href', newHref);
          courseField.value = '';
        });
    });
  </script>

<!-- Stop Copying Here =-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-= -->

</body>

</html>
